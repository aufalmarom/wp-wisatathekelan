!function(t){"#page-top"===window.location.hash&&i("",5);var o={items:{},eachCategory:function(t){for(var o in this.items)this.items.hasOwnProperty(o)&&t(this.items[o])},addItem:function(t,o){this.items[t]||(this.items[t]=[]),this.items[t].push(o)},all:function(){var t=[];for(var o in this.items)this.items.hasOwnProperty(o)&&(t=t.concat(this.items[o]));return t}},e=!1;function n(o){var e=isNaN(parseFloat(o.options.offset))?o.options.offset.call(o.target):o.options.offset;return o.target.offset().top-e-t("body").offset().top}function i(t,o){t===location.hash.replace("#","")||"page-top"===t&&""===location.hash.replace("#","")||setTimeout(function(){t=t?"page-top"===t?" ":"#"+t:" ",history&&history.replaceState&&history.replaceState({},"",t)},o||100)}function r(o){if(!e){e=!0;var r=n(o);t("html, body").animate({scrollTop:r},{easing:"linear",complete:function(){var r=n(o);t("html, body").animate({scrollTop:r},{easing:"linear",duration:100,complete:function(){e=!1,i(o.id,5)}})}})}}function a(o){var e=(o.attr("href")||"").split("#").pop(),n=function(t){var o=jQuery(t)[0].href||"",e="#";try{var n=new window.URL(o);e=[n.protocol,"//",n.host,n.pathname].join("")}catch(t){e=o.split("?")[0].split("#")[0]}return e}(o),i=null,r=[location.protocol,"//",location.host,location.pathname].join("");if(n.length&&n!==r)return i;if(e.trim().length)try{i=t('[id="'+e+'"]')}catch(t){console.log("error scrollSpy",t)}return i&&i.length?i:null}function l(){o.eachCategory(function(t){var o=t.sort(function(t,o){return t.target.offset().top-o.target.offset().top}),e=o.filter(function(t){return t.target.offset().top<=window.scrollY+.25*window.innerHeight}).pop();o.forEach(function(t){e&&t.element.is(e.element)?(i(t.id,5),t.options.onChange.call(t.element)):t.options.onLeave.call(t.element)})})}t.fn.smoothScrollAnchor=function(o){var e=t(this);o=jQuery.extend({offset:0},o),e.each(function(){var e=t(this),n=o.target||a(e);if(n&&n.length){var i={element:e,options:o,target:n,targetSel:o.targetSel||'[id="'+n.attr("id").trim()+'"]',id:(n.attr("id")||"").trim()};e.off("click").on("click",function(t){t.preventDefault(),t.stopPropagation(),r(i)})}})},t.fn.scrollSpy=function(e){var n=t(this),i="spy-"+parseInt(Date.now()*Math.random());n.each(function(){var n=t(this);if(e=jQuery.extend({onChange:function(){},onLeave:function(){},smoothScrollAnchor:!1,offset:0},e),n.is("a")&&-1!==(n.attr("href")||"").indexOf("#")){var r=a(n);if(r){var l={element:n,options:e,target:r,targetSel:'[id="'+r.attr("id").trim()+'"]',id:r.attr("id").trim()};o.addItem(i,l),n.data("scrollSpy",l),e.smoothScrollAnchor&&n.smoothScrollAnchor({offset:e.offset})}}})},t(window).scroll(l),t(window).bind("smoothscroll.update",l),t(function(){var e=window.location.hash.replace("#",""),n=o.all().filter(function(t){return t.targetSel==='[id="'+e.trim()+'"]'});t(window).on("load",function(){n.length&&r(n[0]),l()})})}(jQuery);
